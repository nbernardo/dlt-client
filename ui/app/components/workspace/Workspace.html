<div>

	<dialog id="wodkspaceMainDialog">
		<div class="dialog-icon">⚠️</div>
		<h3 class="dialog-title">Confirm Action</h3>
		<p class="dialog-message" style="text-align: justify;">Are you sure you want to proceed?</p>
		<div class="dialog-buttons">
			<button class="btn btn-cancel">Cancel</button>
			<button class="btn btn-confirm">Confirm</button>
			<button class="btn btn-ok">Ok</button>
		</div>
	</dialog>

	<st-loader center (showIf)="self.showLoading" (label)="Building the workspace">
		<div id="drawflowContainer" (showIf)="!self.showLoading">

			<!--
				<header style="display: none; justify-content: space-between;">
					<h2 style="display: flex;">
						<div>
							<img src="app/assets/imgs/dlt-client-logo-white.png" width="85" style="margin-top: 13px;">
						</div>
						<div> &nbsp;| Workspace</div>
					</h2>
					<div class="top-workspace-nav" style="display: flex; align-items: center; padding: 5px 50px; justify-content: left;">
	
						<div class="action-icon counter-icon" counter="0"
							tooltip="Schedule pipline job(s)" tooltip-x="-145" tooltip-y="-10"
							onclick="component.showHideLogsDisplay()" style="cursor: pointer; border: none;">
							<img src="app/assets/imgs/routine.png" width="25" alt="">
						</div>
						
						<div class="action-icon"
							tooltip="Pipeline(s) log display" tooltip-y="10"
							onclick="component.showHideLogsDisplay()" style="cursor: pointer; border: none;">
							<img src="app/assets/imgs/logs-svgrepo-com.svg" width="18" alt="">
						</div>
	
						<div class="action-icon"
							tooltip="Configurations" tooltip-y="10"
							(click)="goto('Config')" style="cursor: pointer; border: none;">
							<img src="app/assets/imgs/gears.png" width="20" alt="">
						</div>
	
						<div style="border: .5px solid #e1dddd; height: 38px;"></div>
	
						<div class="user-info-wrapper" style="display: flex; align-items: center; padding: 0px 50px; flex-direction: column; justify-content: left; padding-left: 22px;">
							<div style="display: flex; align-items: center;">
								<img src="app/assets/imgs/logged-usr.svg" width="30" alt=""> &nbsp;@loggedUser
							</div>
							<div style="display: flex; width: 100%; padding: 0 35px;">
								<a href="#" style="font-size: 12px; color: grey;" (click)="logout()">Logout</a>
							</div>
						</div>
					</div>
				</header>
			-->
			<st-element component="Header" proxy="headerProxy"></st-element>
			<div class="wrapper">

				<div style="width: 500px;" class="divederLeftSide">
					<st-element component="LeftTabs" (viewPipelineDiagram)="viewPipelineDiagram(event, dbfile)"
						(openScriptOnEditor)="viewScriptOnEditor()" proxy="leftMenuProxy"
						(openDataFileOnEditor)="viewFileOnEditor()"></st-element>
				</div>

				<st-divider type="horizontal" resizable="true" resizeCorrectionPx="150"
					(onResize)="verticalResize(newSize)" />

				<div class="col-right" id="still-adj-right-panel" style="position: relative;">
					<div class="menu">
						<ul style="display: flex;">
							<li style="border: none;">
								Pipeline Name:
							</li>
							<li onclick="controller.changeModule('Home'); controller.changeModule(event);"
								class="selected" tooltip="Pipeline name" tooltip-x="0" tooltip-y="20">
								<div onkeypress="component.onPplineNameKeyPress(event)" contenteditable="true"
									id="pplineNamePlaceHolder">
									@activeGrid
								</div>
							</li>
							<span (showIf)="self.isAnyDiagramActive">
								<li style="border: none;" class="pipeline-context-drop-menu">
									<div style="display: flex; align-items: center;" class="schedule-job-menu">
										<img src="app/assets/imgs/routine.png" width="20" alt="">
										&nbsp;Schedule a job <span class="menu-added-arrow">⌄</span>
									</div>
									<ul class="submenu" style="display: none; background: #a2a6ab;">
										<li class="context-content">
											<div style="color: black; font-weight: bold;">New Pipeline Job Schedule</div>
											<form (formRef)="pplineScheduleFormRef">
												<div>
													<label for="email" style="color: black;" class="form-label">Pipeline Name</label>
													<input type="text" disabled (value)="activeGrid" class="form-input">
												</div>
												<div class="form-group-input">
													<label for="role" style="color: black;" class="form-label">Schedule Peridicity</label>
													<select (value)="schedulePeriodicity">
														<option value="" disabled selected>Select an option...</option>
														<option value="every">Every</option>
														<option value="daily">Daily</option>
														<option value="weekly">Weekly</option>
														<option value="monthly">Monthly</option>
													</select>
												</div>
												<div class="form-group-input">
													<label for="email" style="color: black;" class="form-label">Time setting</label>
													
													<div class="time-setting" style="display: flex;">

														<span (showIf)="self.schedulePeriodicitySelected == 'every'">
															<div style="display: flex;">
																<input class="form-input" type="number" (value)="scheduleTime" placeholder="e.g. 10">
																<select (value)="scheduleTimeType">
																	<option value="min">Min</option>
																	<option value="hour">Hour</option>
																</select>
															</div>
														</span>

														<span (showIf)="self.schedulePeriodicitySelected == 'daily'">
															<input 
																onchange="component.changeScheduleTime(this.value)"
																style="width: 12em;" placeholder="e.g. 12:00" 
																type="time" (value)="scheduleTime" class="form-input">
														</span>

													</div>
												</div>
												<button onclick="component.scheduleJob()" id="btnPipelineSchedule" class="btn btn-primary" disabled>
													Schedule Job
												</button>
											</form>
										</li>
									</ul>
								</li>
							</span>
							<li style="display: none;" onclick="controller.changeModule('Other'); controller.changeModule(event);">Space 2</li>
						</ul>
					</div>

					<st-element component="PopupWindow" @delayed="2s" proxy="popupWindowProxy"></st-element>

					<st-element component="NoteBook" @delayed="3s" proxy="noteBookProxy"></st-element>

					<div id="drawflow" (showIf)="self.showDrawFlow" ondrop="controller.drop(event)"
						ondragover="controller.allowDrop(event)">

						<div style="display: flex;" class="clearAndSaveButton">
							<div class="btn-clear clear-workspace-btn" style="right: 94px;"
								onclick="component.resetWorkspace()">Clear</div>
							<div class="btn-export save-pipeline-btn" (showIf)="self.showSaveButton"
								onclick="component.savePipeline()">
								<i class="fa fa-save"></i> Save
							</div>
							<div class="btn-export update-pipeline-btn" (showIf)="!self.showSaveButton"
								onclick="component.updatePipeline()">
								<i class="fa fa-save"></i> Update
							</div>
						</div>

						<div class="btn-lock">
							<i id="lock" class="fas fa-lock"
								onclick="component.editor.editor_mode='fixed'; controller.changeMode('lock');"></i>
							<i id="unlock" class="fas fa-lock-open"
								onclick="component.editor.editor_mode='edit'; controller.changeMode('unlock');"
								style="display:none;"></i>
						</div>
						<div class="bar-zoom">
							<i class="fas fa-search-minus" onclick="component.editor.zoom_out()"></i>
							<i class="fas fa-search" onclick="component.editor.zoom_reset()"></i>
							<i class="fas fa-search-plus" onclick="component.editor.zoom_in()"></i>
						</div>
					</div>

					<div style="position: absolute;">
						<st-element component="LogDisplay" proxy="logProxy"></st-element>
					</div>
				</div>
			</div>
		</div>
</div>

<style>
	.top-workspace-nav .counter-icon span{
		margin-left: -30px; top: 18px;
		border-radius: 100%;
		position: absolute;
		font-size: 10px;
		padding: 3px;
		padding-bottom: 4px;
		width: 15px; height: 15px;
		text-align: center;
		background: #2c3e50;
		color: white;
	}

	.top-workspace-nav .action-icon{
		width: 50px;
	}

	.wrapper .divider {
		height: 25px;
		padding-top: 2px;
		padding-bottom: 2px;
		font-size: 14px;
		color: rgb(86, 84, 84);
	}

	.wrapper .divider .label {
		cursor: pointer;
	}

	.terminal-mode-list {
		position: relative;
		padding: 3px 0px 3px 5px;
		font-size: 13px;
		background-color: white;
		display: flex;
	}

	.terminal-mode-list .separator {
		padding-left: 7px;
		padding-right: 10px;
		background: no-repeat;
		display: flex;
		padding-top: 5px;
	}

	.editor-lang-mode,
	.editor-lang-mode-selected {
		display: flex;
		padding: 3px;
		border-radius: 6px;
		border: 1px solid #c9c4c4;
		color: #939090;
		cursor: pointer;
		font-weight: normal;
	}

	.editor-lang-mode-selected {
		border: 1px solid black !important;
		color: black !important;
		font-weight: bold !important;
	}

	.editor-lang-mode img,
	.editor-lang-mode-selected img {
		width: 15px;
		margin-left: 5px;
		opacity: .4;
	}

	.editor-lang-mode-selected img {
		opacity: 1 !important;
	}

	.table-in-treeview,
	.ppline-treeview {
		display: flex;
		justify-content: space-between;
	}

	.tbl-to-terminal {
		width: 13px;
		opacity: .8;
		cursor: pointer;
	}

	.tables-icn-container {
		width: 15px;
		left: -6px;
		cursor: pointer;
		display: flex;
	}

	.tables-icn-container span:nth-child(1) {
		margin-left: -28px;
	}

	.tables-icn-container span:nth-child(2) {
		margin-left: 5px;
	}

	.ppline-treeview .ppline-treeview-label {
		margin-left: -25px;
		display: flex;
	}

	.ppline-treeview {
		margin-left: 0px;
		display: flex;
	}

	.ppline-treeview img {
		width: 30px;
		position: relative;
		z-index: 1000;
	}

	/** Dialog styling */
	dialog::backdrop {
		background: repeating-linear-gradient(45deg,
				rgba(0, 0, 0, 0.2),
				rgba(0, 0, 0, 0.2) 1px,
				rgba(0, 0, 0, 0.3) 1px,
				rgba(0, 0, 0, 0.3) 20px);
		backdrop-filter: blur(3px);
	}

	dialog {
		border: none;
		border-radius: 12px;
		box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
		padding: 24px;
		max-width: 350px;
		position: fixed;
		top: 20%; left: 50%;
		z-index: 100000000000000000;
	}

	.dialog-title {
		font-size: 20px;
		font-weight: 600;
		margin: 0 0 8px 0;
		color: #333;
	}

	.dialog-message {
		color: #666;
		margin: 0 0 20px 0;
		line-height: 1.4;
	}

	.dialog-buttons {
		display: flex;
		gap: 8px;
		justify-content: flex-end;
	}

	.btn {
		padding: 8px 16px;
		border: 1px solid #ddd;
		border-radius: 6px;
		font-size: 14px;
		cursor: pointer;
		background: white;
	}

	.btn-cancel {
		color: #666;
	}

	.btn-cancel:hover {
		background: #f5f5f5;
	}

	.btn-confirm {
		background: #007bff;
		color: white;
		border-color: #007bff;
	}

	.btn-confirm:hover {
		background: #0056b3;
	}
	/** End Dialog styling */


	/** Active Pipeline Dropdown menu */

        .pipeline-context-drop-menu, .scheduled-pipeline-context-drop-menu {
            list-style-type: none;
            position: relative;
        }

        .pipeline-context-drop-menu .submenu, 
		.scheduled-pipeline-context-drop-menu .submenu {
			display: none;
			position: absolute;
			top: 100%;
			left: 0;
			padding: 0;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			z-index: 100000000;
			background: #e9e7e7;
			border: none;
			width: 230px;
        }

        .pipeline-context-drop-menu .submenu li,
        .scheduled-pipeline-context-drop-menu .submenu li
		{
            list-style-type: none;
        }

        .pipeline-context-drop-menu .context-content,
        .scheduled-pipeline-context-drop-menu .context-content
		 {
			padding-bottom: 12px !important;
        }

		.pipeline-context-drop-menu .form-label, 
		.scheduled-pipeline-context-drop-menu .form-label 
		{
			margin-bottom: -0.5rem;
			font-weight: bold;
        }

        .pipeline-context-drop-menu .submenu li div,
        .scheduled-pipeline-context-drop-menu .submenu li div
		{
            display: block;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }

	/** End Active Pipeline Dropdown menu */
</style>