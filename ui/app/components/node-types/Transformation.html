<div class="@cmpInternalId" style="z-index: 1;">
	<div class="pipeline-node-type-minimaze" onclick="controller('WorkSpaceController').handleNodeMinimize(this, '200px', 'transform')">_</div>
	<div class="title-box pipeline-node-type-title-box">
		<div>
			<i class="fas fa-cogs"></i>
			Transformation
			<button style="margin-left: 18px;" class="add-btn-primary btn-padding-height7" (click)="addNewField()">+ Transformation</button>
			<button style="margin-left: 5px;" class="add-btn-primary btn-padding-height7" (click)="addNewField(null, false, true)">New Field</button>
			<button style="margin-left: 5px;" class="e2e-btn-secondary btn-padding-height7" (click)="getTransformationPreview()">
				<img src="app/assets/imgs/magnifier.svg" style="float: left; width: 16px;"> &nbsp;Preview Result
			</button>
		</div>
		<div class="statusicon">@nodeCount</div>
	</div>
	<div class="box">
		
		<st-loader 
			small center
			(showIf)="self.showLoading" 
			topPadding="50"
			(label)="Parsing Rules..."/>

		<span (showIf)="!self.showLoading" class="all-transformations-container">
			<table class="transform-container-@uniqueId transform-container">
				<tr>
					<td></td>
					<td>Source</td>
					<td>Field</td>
					<td>Transf. type</td>
					<td>Output expected</td>
				</tr>
			</table>
			<span class="showButtonContainer" (showIf)="!self.gettingTransformation">
				<!-- <div style="margin: 3px 8px;">
					<button style="margin-left: 18px;" (click)="parseTransformationCode()">&nbsp; Parse code &nbsp;</button>
				</div> -->
			</span>
		</span>
		<st-loader 
			small center
			topPadding="160"
			(showIf)="self.gettingTransformation"
			(label)="Running transformation preview..."/>

		<span (showIf)="!self.gettingTransformation">
			<div class="transform-preview-datatable-wrap @cmpInternalId-previewPlaceholder"></div>
		</span>
	</div>
</div>
<style>
    .parent-node .Transformation .mini-loader-dot{ width: 19px; height: 13px; background-color: #2c3e50; }
	.parent-node .Transformation { width: 600px; z-index: 1; }

	.parent-node .Transformation .title-box{
		display: flex; justify-content: space-between; padding-right: 9px;
	}

	.transform-preview-datatable-wrap {
		overflow: auto; width: 100%; padding: 5px;
		overflow-y: scroll; max-height: 128px; border: 1px solid;
		.transform-preview-datatable {
			min-width: 100%; td{ padding: 2px 5px; font-size: 11.7px; min-width: 6em; }
		}
	}

	.all-transformations-container{
		display: block; width: 101.5%; overflow-y: scroll; max-height: 200px;
	}
</style>