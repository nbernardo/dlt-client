<div class="log-display-wrapper" (showIf)="self.showLogs">
	<div class="terminal-container">
		<div class="terminal-header" style="display: flex; justify-content: space-between;">
			<div onclick="component.showHideLogsDisplay()"
				class="logs-minimize-icon">_</div>
			<div>Realtime Log Stream</div>
			<div></div>
		</div>
		<div class="terminal-body" id="@logOutputContainerId">
			<table id="@logTableId" class="log-output-table">
				<tbody>
					<!-- Log entries will be appended here -->
				</tbody>
			</table>
		</div>
		<div class="terminal-controls">
			<button 
				onclick="component.clearLogs()"
				class="clear-logs-btn" 
				tooltip="clear logs" 
				tooltip-x="-25" 
				tooltip-y="-40">&#128465;</button>
			&nbsp;&nbsp;
			<button id="@autoScrollBtnId" class="scroll-control-btn">Stop Auto-Scroll</button>
		</div>
	</div>
</div>

<style>

	.log-display-wrapper {
		--bg-color: #1a1a1a;
		--text-color: #f0f0f0;
		--info-color: #61afef;
		--warn-color: #e5c07b;
		--error-color: #e06c75;
		--bar-color: #50fa7b;
		--glow-color: #3b82f6;
		/* background-color: var(--bg-color); */
		color: var(--text-color);
		font-family: monospace;
		margin: 0;
		display: flex;
		justify-content: center;
		align-items: center;
		height: 100vh;
		overflow: hidden;
		padding: 0px;
		box-sizing: border-box;
		font-size: 0.75rem;

		width: 790px;
		height: 225px;
		position: fixed;
		right: 9px;
		bottom: 22px;
		z-index: 11;
	}

	.log-display-wrapper .terminal-container {
		width: 100%;
		max-width: 900px;
		height: 100%;
		max-height: 600px;
		border: 2px solid #555;
		border-radius: 8px;
		background-color: #393838;
		box-shadow: 0 0 20px rgba(0, 0, 0, 0.5), 0 0 10px var(--glow-color);
		padding: 10px;
		display: flex;
		flex-direction: column;
		box-sizing: border-box;
	}

	.log-display-wrapper .terminal-header {
		color: #9d9999;
		font-size: 0.9rem;
		text-align: center;
		padding-bottom: 5px;
	}

	.log-display-wrapper .terminal-body {
		flex-grow: 1;
		overflow-y: auto;
		overflow-x: hidden;
		scrollbar-width: thin;
		scrollbar-color: #444 #111;
		padding: 5px;
		padding-top: 11px;
	}

	.log-display-wrapper .terminal-body::-webkit-scrollbar {
		width: 8px;
	}

	.log-display-wrapper .terminal-body::-webkit-scrollbar-track {
		background: #111;
	}

	.log-display-wrapper .terminal-body::-webkit-scrollbar-thumb {
		background-color: #444;
		border-radius: 4px;
		border: 2px solid #111;
	}

	.log-display-wrapper .log-output-table {
		width: 100%;
		border-collapse: collapse;
		table-layout: fixed;
	}

	.log-display-wrapper .log-entry td {
		padding-top: 4px;
		padding-bottom: 4px;
		vertical-align: top;
	}

	.log-display-wrapper .log-entry:nth-child(even) {
		background-color: rgba(255, 255, 255, 0.03);
	}

	.log-display-wrapper .timestamp {
		color: #888;
		width: 80px;
	}

	.log-display-wrapper .log-level {
		font-weight: bold;
		text-transform: uppercase;
		width: 50px;
		text-align: right;
	}

	.log-display-wrapper .log-level.info {
		color: var(--info-color);
	}

	.log-display-wrapper .log-level.warn {
		color: var(--warn-color);
	}

	.log-display-wrapper .log-level.error {
		color: var(--error-color);
	}

	.log-display-wrapper .log-message {
		color: var(--text-color);
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		padding-left: 10px;
		padding-right: 10px;
		text-wrap: auto;
	}

	.log-display-wrapper .time-gap-cell {
		width: 60px;
	}

	.log-display-wrapper .bar-cell {
		width: 100px;
	}

	.log-display-wrapper .bar-container {
		display: flex;
		align-items: center;
		flex-shrink: 0;
		white-space: nowrap;
	}

	.log-display-wrapper .log-chart-bar {
		height: 8px;
		background-color: var(--bar-color);
		border-radius: 4px;
		min-width: 1px;
		position: relative;
	}

	/* Tooltip for start and end times */
	.log-display-wrapper .log-chart-bar:hover::after {
		content: attr(data-tooltip);
		position: absolute;
		bottom: 100%;
		left: 50%;
		transform: translateX(-50%);
		background-color: #333;
		color: white;
		padding: 4px 8px;
		border-radius: 4px;
		font-size: 0.7rem;
		white-space: nowrap;
		z-index: 10;
	}

	.log-display-wrapper .terminal-controls {
		display: flex;
		justify-content: center;
		padding-top: 10px;
	}

	.log-display-wrapper .scroll-control-btn, .log-display-wrapper .clear-logs-btn {
		background-color: #333;
		color: #f0f0f0;
		border: 1px solid #555;
		padding: 8px 16px;
		border-radius: 4px;
		cursor: pointer;
		font-family: monospace;
		font-size: 0.8rem;
		transition: background-color 0.2s, border-color 0.2s;
	}

	.log-display-wrapper .scroll-control-btn:hover, .log-display-wrapper .clear-logs-btn:hover {
		background-color: #444;
		border-color: #888;
	}

	.log-display-wrapper .scroll-control-btn:active, .log-display-wrapper .clear-logs-btn:active {
		background-color: #555;
	}

	/* Mobile responsiveness */
	@media (max-width: 768px) {
		.log-display-wrapper .terminal-container {
			padding: 5px;
			border-radius: 4px;
		}

		.log-display-wrapper .terminal-header {
			font-size: 0.8rem;
		}
	}
</style>